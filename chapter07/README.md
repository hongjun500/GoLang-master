# 方法和接口

## 方法

- 一类带特殊的 **接收者** 参数的函数
  > 这里的接收者可以是结构体类型，还包括基本数据类型、切片、映射等
- 方法是一个特殊类型的函数，它绑定到一个类型上，并且只能通过该类型的实例来调用。方法是在结构体类型上定义的，因此它们可以访问该类型的字段
- ~~特殊接收者不能是int或者string等内建类型（基本数据类型）~~

  > 方法的 **接收者**位于 `func` 关键字和方法名之间
    - 方法本质就是一个带有**接收者**参数的函数
    - ~~方法的声明必须和**接收者**类型在同一包内~~
        - 指针接收者和值接收者的区别
          > 方法对于**值接收者**时会对其副本(不会改变原有数据)进行操作改变，不过只针对于基本数据类型
    - **接收者为指针类型的方法被调用时，接收者既能为值又能为指针**
    - 匿名函数的闭包：引用外部变量或者外部常量
    - 返回值可以使用如下方式定义
      > ...Type
  > 小写字母开头的函数只能在本包内使用，大写字母开头的函数才可以在其它包中使用，此规则同时适用于变量和类型

  > 函数是一段代码块，可以被独立调用，并且可以接受零个或多个参数。函数可以返回零个或一个值。函数没有接收者(receiver)
  ，即它们是全局的或包级别的，
  可以在任何地方调用

## 接口

```go
package main

import (
	"bytes"
)

// ReadWrite 普通接口
type ReadWrite interface {
	Read(b bytes.Buffer) bool
	Write(b bytes.Buffer) bool
}

type Lock interface {
	Lock()
	Unlock()
}

// File 接口嵌套接口
type File interface {
	ReadWrite
	Lock
	Close()
}

```

- 接口是一种类型，它规定了变量有哪些方法
- 接口类型是由一组方法定义的集合，接口类型的变量可以存放实现接口方法的任何值
- 接口类型的变量不能调用实现了接口类型定义的方法之外的方法
- 接口类型不能包含任何变量
- 接口类型是隐式实现的，无需声明实现了哪些接口，只要实现了接口类型定义的所有方法即可
- 实现接口的类型可以是结构体类型，也可以是非结构体类型。例如，切片类型、映射类型、函数类型、指针类型、接口类型、字符串类型、
  数字类型、数组类型、通道类型、结构体类型等都可以实现接口
- 接口类型可以作为函数的参数或返回值
- 接口类型可以用于判断一个变量是否实现了某个接口
- 接口类型也可以实现类型断言，例如 `value, ok := v.(T)` ，其中 `v` 是接口类型的变量，`T` 是类型，`value` 是 `T` 类型的变量，
  `ok` 是 `bool` 类型的变量，如果 `v` 实现了 `T` 类型定义的所有方法，则 `value` 的值为 `v` 的值，`ok` 的值为 `true`
  ，否则 `value`
  的值为 `T` 类型的零值，`ok` 的值为 `false`
